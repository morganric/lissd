<h1>
	<%= @list.title %>
	<span class="pull-right">
		<%= link_to "add new list", new_list_path, :class => "btn btn-primary"  %>
	</span>

</h1>

<% if @list.user_id != nil %>
	<h3>
		by <%= link_to "#{@list.user.name}", user_url(@list.user_id) %>
	<span class="pull-right">
		<small><%= @list.items.count %> items</small>
	</span>

	</h3>
<% end %>
<p class="well"> <%= @list.description %></p>


<ol id="list-items">
	<% @list.items.each do |item| %>
		<% if item.id %>

			<% if item.completed %>
				<h3 class="row">
					<li class="done span12">	
							<%= item.title %>
							<% if user_signed_in? && @list.user == current_user || user_signed_in? && current_user.has_role?(:admin)  %>
							<span class="span1 pull-right">
								<%= button_to "undo",  incomplete_item_path(@list.id, item.id), :class => "btn btn-mini btn-warning " %>
							</span>
							<span class="span1 pull-right">
								<%= button_to "x remove", remove_item_path(@list.id, item.id), :class => "btn btn-mini btn-danger " %>
							</span>
							
						<% end %>
					</li>
				</h3>
			<% else %>
				<h3 class="row">
					<li class="span12 ">
						<%= item.title %>
						<% if @list.user = current_user %>
							<span class="span1 pull-right">
								<%= button_to "done",  complete_item_path(@list.id, item.id), :class => "btn btn-mini btn-primary " %>
							</span>
							<span class="span1 pull-right">
								<%= button_to "x remove", remove_item_path(@list.id, item.id), :class => "btn btn-mini btn-danger " %>
							</span>
						<% end %>
					</li>
				</h3>
			<% end %>

		<% end %>
	<% end %>

</ol>

<hr />

<%= form_for( [@list, @item], :html => {:class => "form-inline"}) do |form| %>
	<% if @list.user == current_user || @list.user_id == nil %>
		<p>
			<label class="checkbox">
			<%= form.text_field :title, :class => "input" %>
			<label>
			<%= form.submit "+ Add item", :class => "btn btn-small btn-primary" %>
		</p>

	<% end %>	
<% end %>

<%= link_to "back to all lists", lists_url %>